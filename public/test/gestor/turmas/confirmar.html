<!doctype html><html lang="pt-br"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Criar Turma — Passo 4 (Confirmar)</title><link rel="stylesheet" href="/test/gestor/assets/styles.css"></head><body><button id="theme-toggle" class="theme-toggle btn secondary">Tema</button><div class="wrap"><div class="progress"><div class="step"><div class="dot"></div><span class="muted">Modalidade</span></div><div class="step"><div class="dot"></div><span class="muted">Detalhes</span></div><div class="step"><div class="dot"></div><span class="muted">Agendamento</span></div><div class="step"><div class="dot active"></div><span class="muted">Confirmar</span></div></div><div class="card"><h2 class="title">Confirmar Criação</h2><div id="preview" class="muted"></div><div class="nav"><button class="btn secondary" id="back">Voltar</button><button class="btn" id="create">Criar Turma</button></div><div id="status" class="status muted"></div></div><div class="card"><h2 class="title">Ações Pós-Criação</h2><div class="nav"><button class="btn" id="gerar">Gerar Aulas da Semana</button><button class="btn secondary" id="dashboard">Ir ao Dashboard</button></div><pre id="res" class="muted"></pre></div></div><div id="toast" class="toast" style="display:none"></div><script type="module">import{request,applyTheme,toggleTheme,ensureTokenOrRedirect,get,setStatus,toast}from'/test/gestor/assets/api.js';applyTheme();document.getElementById('theme-toggle').onclick=toggleTheme;ensureTokenOrRedirect();function parseDias(){try{return JSON.parse(get('tur_dias')||'[]')}catch(e){return[]}}(function renderPreview(){const p=document.getElementById('preview');const nome=get('tur_nome')||'';const modalidade=get('tur_mod')||'';const professorPerfil=get('tur_prof_perfil')||'';const dias=parseDias();const horario=get('tur_hor')||'';p.textContent=JSON.stringify({nome,modalidade,professorPerfil,diasDaSemana:dias,horario})})();document.getElementById('back').onclick=()=>{location.href='/test/gestor/turmas/agendamento.html'};let turmaId=null;document.getElementById('create').onclick=async()=>{const nome=get('tur_nome')||'';const modalidade=get('tur_mod')||'';const professorPerfil=get('tur_prof_perfil')||'';const dias=parseDias();const horario=get('tur_hor')||'';if(!nome||!modalidade||!professorPerfil||dias.length===0||!horario){alert('Dados incompletos');return}const r=await request('POST','/api/turmas',{nome,modalidade,professor:professorPerfil,diasDaSemana:dias,horario});setStatus(r.res.ok,'Criar Turma: '+r.res.status);document.getElementById('res').textContent=JSON.stringify(r.data);if(r.res.ok){turmaId=r.data?.turma?._id||r.data?._id||null}};document.getElementById('gerar').onclick=async()=>{if(!turmaId){toast('Crie a turma primeiro');return}const r=await request('POST','/api/aulas/turmas/'+turmaId+'/gerar-semana');setStatus(r.res.ok,'Gerar Semana: '+r.res.status);document.getElementById('res').textContent=JSON.stringify(r.data)};document.getElementById('dashboard').onclick=()=>{location.href='/test/gestor/dashboard.html'};</script></body></html>