<!doctype html><html lang="pt-br"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Criar Turma — Passo 2 (Detalhes)</title><link rel="stylesheet" href="/test/gestor/assets/styles.css"></head><body><button id="theme-toggle" class="theme-toggle btn secondary">Tema</button><div class="wrap"><div class="progress"><div class="step"><div class="dot"></div><span class="muted">Modalidade</span></div><div class="step"><div class="dot active"></div><span class="muted">Detalhes</span></div><div class="step"><div class="dot"></div><span class="muted">Agendamento</span></div><div class="step"><div class="dot"></div><span class="muted">Confirmar</span></div></div><div class="card"><h2 class="title">Detalhes da Turma</h2><label>Nome da Turma<input id="tur-nome"></label><label><input type="checkbox" id="usar-meu-prof"> Usar meu perfil de professor</label><label>ID do Perfil do Professor (opcional)<input id="tur-prof-perfil"></label><div class="muted">Se você marcou "Usar meu perfil de professor", não precisa preencher o ID. Caso contrário, informe o ID do perfil de professor da academia.</div><div class="nav"><button class="btn secondary" id="back">Voltar</button><button class="btn" id="next">Continuar</button></div><div id="status" class="status muted"></div></div></div><div id="toast" class="toast" style="display:none"></div><script type="module">import{request,applyTheme,toggleTheme,ensureTokenOrRedirect,set,get}from'/test/gestor/assets/api.js';applyTheme();document.getElementById('theme-toggle').onclick=toggleTheme;ensureTokenOrRedirect();(async()=>{const perf=await request('GET','/api/perfis/user');const pro=Array.isArray(perf.data)?perf.data.find(p=>String(p.tipo).toLowerCase()==='professor'):null;if(!pro){document.getElementById('usar-meu-prof').disabled=true}document.getElementById('tur-nome').value=get('tur_nome')||'';document.getElementById('tur-prof-perfil').value=get('tur_prof_perfil')||''})();document.getElementById('back').onclick=()=>{location.href='/test/gestor/turmas/modalidade.html'};document.getElementById('next').onclick=async()=>{const nome=(document.getElementById('tur-nome').value||'').trim();if(!nome){alert('Informe o nome da turma');return}set('tur_nome',nome);const usarMeu=document.getElementById('usar-meu-prof').checked;if(usarMeu){const perf=await request('GET','/api/perfis/user');const pro=Array.isArray(perf.data)?perf.data.find(p=>String(p.tipo).toLowerCase()==='professor'):null;if(pro&&pro._id){set('tur_prof_perfil',pro._id)}else{alert('Seu usuário não possui perfil de professor');return}}else{const id=(document.getElementById('tur-prof-perfil').value||'').trim();if(id)set('tur_prof_perfil',id)}location.href='/test/gestor/turmas/agendamento.html'}</script></body></html>