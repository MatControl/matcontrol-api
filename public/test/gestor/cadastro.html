<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Cadastro Gestor</title>
  <link rel="stylesheet" href="/test/gestor/assets/styles.css">
  </head>
<body>
  <button id="theme-toggle" class="theme-toggle btn secondary">Tema</button>
  <div class="wrap">
    <div class="signup-gestor">
      <div class="hero">
        <div class="brand"><span class="logo">MatControl</span><span class="tag">Sua academia no controle</span></div>
        <div class="pill">Área de Cadastro</div>
        <h1>Crie sua conta gratuita</h1>
        <div class="sub">Leva menos de 2 minutos.<br>Não precisa cadastrar cartão.</div>
      </div>
      <div class="card">
        <div class="input-with-icon">
          <img src="/figma/891_7891/image/miuu9o0m-zqtwryr.svg" alt="icon">
          <input id="nome" placeholder="Digite seu nome">
        </div>
        <div class="input-with-icon">
          <img src="/figma/891_7891/image/miuu9o0m-1k6ao1q.svg" alt="icon">
          <input id="email" type="email" placeholder="Digite seu E-mail">
        </div>
        <div class="input-with-icon">
          <img src="/figma/891_7891/image/miuu9o0m-ynho9vo.svg" alt="icon">
          <input id="senha" type="password" placeholder="Digite sua senha">
          <img src="/figma/891_7891/image/miuu9o0m-8ycsm0q.svg" alt="toggle">
        </div>
        <div class="nav"><button id="submit" class="btn gradient">Fazer Cadastro</button></div>
        <div class="or"><div class="line"></div><div class="muted">Ou cadastre-se usando</div><div class="line"></div></div>
        <div class="social-grid">
          <div class="social"><img src="/figma/891_7891/image/miuu9o0m-50kmd4o.svg" alt="Google"></div>
          <div class="social"><img src="/figma/891_7891/image/miuu9o0m-gc865sx.svg" alt="Facebook"></div>
          <div class="social"><img src="/figma/891_7891/image/miuu9o0m-vd8qh84.svg" alt="Apple"></div>
        </div>
        <p class="helper">Já tem cadastro? <a href="/test/gestor/login">Fazer Login</a></p>
        <div id="status" class="status muted"></div>
      </div>
    </div>
  </div>
  <div id="toast" class="toast" style="display:none"></div>
  <script type="module">
    import { request, toast, setStatus, saveCreds, stepDots, applyTheme, toggleTheme, set, KEYS } from '/test/gestor/assets/api.js'
    set(KEYS.theme,'light');
    applyTheme();
    document.getElementById('theme-toggle').onclick = toggleTheme;
    stepDots(0);
    document.getElementById('submit').onclick = async () => {
      const nome = document.getElementById('nome').value.trim();
      const email = document.getElementById('email').value.trim();
      const senha = document.getElementById('senha').value.trim();
      if (!nome || !email || !senha) { toast('Preencha todos os campos'); return }
      const r = await request('POST','/api/gestor/cadastro',{ nome, email, senha });
      setStatus(r.res.ok, 'Cadastro: ' + r.res.status);
      if (r.res.ok) {
        saveCreds(email, senha);
        toast('Cadastro realizado');
        location.href = '/test/gestor/login';
      }
    }
  </script>
</body>
</html>
